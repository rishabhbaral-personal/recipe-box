:root {
    --box-color: #3e2723;
    --box-border: #1b100d;
    /* Parchment effect: light yellowish tan with subtle texture */
    --parchment: #f4e4bc; 
}

body {
    background: #0d0907;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    perspective: 2000px;
    margin: 0;
    overflow: hidden;
}

.recipe-box-3d {
    width: 450px;
    height: 250px;
    position: relative;
    transform-style: preserve-3d;
    transform: rotateX(-15deg) rotateY(-10deg);
}

.box-face {
    position: absolute;
    background: var(--box-color);
    border: 6px solid var(--box-border);
    box-shadow: inset 0 0 60px rgba(0,0,0,0.8);
}

/* Prism Faces */
.front  { width: 450px; height: 200px; transform: translateZ(125px); color: #8d6e63; display: flex; align-items: center; justify-content: center; font-family: 'Georgia', serif; font-variant: small-caps; letter-spacing: 3px; }
.back   { width: 450px; height: 200px; transform: rotateY(180deg) translateZ(125px); }
.right  { width: 250px; height: 200px; transform: rotateY(90deg) translateZ(325px); left: 0; }
.left   { width: 250px; height: 200px; transform: rotateY(-90deg) translateZ(125px); left: 0; }
.bottom { width: 450px; height: 250px; transform: rotateX(-90deg) translateZ(75px); }

/* The Cards */
.cards-stack {
    position: absolute;
    width: 380px;
    top: -70px;
    left: 35px;
    transform-style: preserve-3d;
}

.recipe-card {
    width: 380px;
    height: 260px;
    position: absolute;
    cursor: pointer;
    transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform-style: preserve-3d;
}

.recipe-card:nth-child(n) { transform: translateZ(calc(var(--i) * 3px)); }

/* Animation - Moves card up higher to avoid cutoffs and flips */
.recipe-card.active {
    transform: translateY(-380px) rotateY(180deg) translateZ(300px) !important;
    z-index: 1000;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
}

.card-front, .card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    padding: 20px;
    box-sizing: border-box;
    border: 1px solid #d4c3a3;
    /* Parchment texture simulation */
    background: var(--parchment);
    background-image: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.2), transparent),
                      url('https://www.transparenttextures.com/patterns/handmade-paper.png');
    box-shadow: 2px 5px 15px rgba(0,0,0,0.4);
}

.card-front {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    border-top: 15px solid #6d4c41;
}

/* Internal Scroll for the back of the card */
.card-back {
    transform: rotateY(180deg);
    display: flex;
    flex-direction: column;
}

.parchment-content {
    overflow-y: auto;
    padding-right: 10px;
    height: 100%;
    font-family: 'Palatino', 'URW Palladio L', serif;
    font-style: italic;
    color: #3e2723;
    line-height: 1.5;
}

/* Custom Scrollbar for parchment look */
.parchment-content::-webkit-scrollbar { width: 5px; }
.parchment-content::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 10px; }

h3 { margin: 0; color: #3e2723; }
h4 { color: #bf360c; border-bottom: 1px solid #8d6e63; margin-top: 0; padding-bottom: 5px; }
strong { color: #5d4037; }
